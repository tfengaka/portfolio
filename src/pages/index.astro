---
import { IconBrandGithub, IconBrandLinkedin } from "@tabler/icons-react";
import { getCollection } from "astro:content";
import { Globe, Mail } from "lucide-react";
import { Image } from "astro:assets";
import avatar from "../assets/avatar.jpg";
import ContactCard from "../components/ContactCard.astro";
import Section from "../components/Section.astro";
import WorkEntry from "../components/WorkEntry.astro";
import Layout from "../layouts/Layout.astro";

const experience = await getCollection("experience");
const sortedExperience = experience.sort((a, b) => {
	if (a.data.endDate === "Present") return -1;
	if (b.data.endDate === "Present") return 1;
	return 0; // Keeping it simple for the sample data
});

const projects = await getCollection("projects");
const sortedProjects = projects;
---

<Layout title="Nguyen Thanh Hoa | Software Engineer">
	<!-- Hero Section -->
	<section
		class="min-h-[85vh] flex items-center justify-center max-w-7xl mx-auto py-20"
	>
		<div
			class="grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-24 w-full items-center"
		>
			<!-- Left: Avatar Box -->
			<div
				class="relative w-full max-w-sm mx-auto aspect-square order-2 lg:order-1 group"
			>
				<div
					class="absolute inset-0 border-2 border-accent/20 rounded-2xl transform translate-x-4 translate-y-4 transition-transform duration-500 group-hover:translate-x-2 group-hover:translate-y-2"
				>
				</div>
				<div
					class="absolute inset-0 bg-slate-800 rounded-2xl overflow-hidden flex items-center justify-center border border-white/5 shadow-2xl"
				>
					<Image
						src={avatar}
						alt="Nguyen Thanh Hoa"
						class="w-full h-full object-cover opacity-90 group-hover:opacity-100 transition-opacity duration-500"
					/>
				</div>
				<!-- Decorative elements -->
				<div
					class="absolute -z-10 -top-8 -left-8 w-24 h-24 bg-accent/20 rounded-full blur-3xl"
				>
				</div>
				<div
					class="absolute -z-10 -bottom-8 -right-8 w-32 h-32 bg-purple-500/20 rounded-full blur-3xl"
				>
				</div>
			</div>

			<!-- Right: Content -->
			<div class="flex flex-col gap-6 order-1 lg:order-2">
				<div class="w-12 h-1 bg-accent mb-4"></div>
				<h1 class="text-5xl lg:text-7xl font-bold text-white tracking-tight">
					Hi, Iâ€™m <span class="text-slate-300">Hoa</span><span
						class="text-accent">.</span
					>
				</h1>
				<h2
					class="text-2xl lg:text-3xl font-bold text-slate-500 flex items-center gap-3"
				>
					Software Engineer
				</h2>
				<p class="max-w-lg text-lg text-slate-400 leading-relaxed mt-4">
					Fullstack Developer with a strong focus on <span class="text-accent"
						>Frontend Excellence</span
					>. Building beautiful, performant user interfaces and robust web
					applications.
				</p>
			</div>
		</div>
	</section>

	<!-- Status Strip -->
	<div
		class="w-full border-y border-slate-800 bg-[#0B1120]/50 backdrop-blur-sm"
	>
		<div
			class="max-w-7xl mx-auto px-6 py-4 flex flex-col md:flex-row justify-between items-center gap-4 text-xs md:text-sm font-mono text-slate-500 uppercase tracking-widest"
		>
			<div class="flex items-center gap-3">
				<span class="relative flex h-2 w-2">
					<span
						class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"
					></span>
					<span class="relative inline-flex rounded-full h-2 w-2 bg-green-500"
					></span>
				</span>
				<span class="text-green-400/80 font-semibold">Available for work</span>
			</div>

			<div class="hidden md:flex items-center gap-2">
				<span>Based in Vietnam</span>
			</div>

			<div class="flex items-center gap-2">
				<span class="text-accent">Frontend Focus</span>
			</div>
		</div>
	</div>

	<!-- Ticker Strip with Logos -->

	<!-- About Section -->
	<Section id="about" title="About">
		<div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
			<!-- Code Window Graphic -->
			<div
				class="bg-[#1e1e1e] w-full rounded-xl border border-slate-800 shadow-2xl overflow-hidden group hover:border-accent/30 transition-colors"
			>
				<!-- Title Bar -->
				<div
					class="flex items-center px-4 py-3 bg-[#252526] border-b border-white/5 gap-2"
				>
					<div class="w-3 h-3 rounded-full bg-red-500/80"></div>
					<div class="w-3 h-3 rounded-full bg-yellow-500/80"></div>
					<div class="w-3 h-3 rounded-full bg-green-500/80"></div>
					<div class="ml-auto text-xs text-slate-500 font-mono">
						dev_profile.ts
					</div>
				</div>
				<!-- Code Content -->
				<div class="p-6 font-mono text-sm leading-relaxed overflow-x-auto">
					<div class="text-slate-400">
						<span class="text-purple-400">const</span>
						<span class="text-blue-400">developer</span> = <span
							class="text-yellow-400">&#123;</span
						>
						<div class="pl-4">
							name: <span class="text-green-400">"Nguyen Thanh Hoa"</span>,
						</div>
						<div class="pl-4">
							role: <span class="text-green-400">"Software Engineer"</span>,
						</div>
						<div class="pl-4">
							stack: <span class="text-yellow-400">[</span>
							<span class="text-green-400">"TypeScript"</span>,
							<span class="text-green-400">"React"</span>,
							<span class="text-green-400">"Node"</span>
							<span class="text-yellow-400">]</span>,
						</div>
						<div class="pl-4">
							focus: <span class="text-green-400">"Frontend Excellence"</span>,
						</div>
						<span class="text-yellow-400">&#125;;</span>
					</div>
					<div class="mt-4 text-slate-500 animate-pulse">_</div>
				</div>
			</div>
			<div class="flex flex-col gap-6">
				<p class="text-lg text-slate-300 leading-relaxed">
					Software Engineer with a strong foundation in <span
						class="text-white font-semibold">Web Technologies</span
					>.
				</p>
				<p class="text-slate-400 leading-relaxed">
					Currently, my focus is on mastering modern frontend frameworks and
					creating seamless user experiences. I have a solid foundation in HTML,
					CSS, JavaScript/TypeScript and Fullstack development.
				</p>
			</div>
		</div>
	</Section>

	<!-- Experience Section -->
	<Section id="experience" title="Experience">
		<div class="flex flex-col gap-2">
			{sortedExperience.map((entry) => <WorkEntry entry={entry} />)}
		</div>
	</Section>

	<!-- Projects / Formation Style Grid -->
	<Section id="projects" title="Projects">
		<div class="grid grid-cols-1 gap-6">
			{
				sortedProjects.map((project) => (
					<div class="group flex flex-col md:flex-row gap-6 items-start p-6 bg-slate-900/30 border border-slate-800 rounded-xl hover:border-accent/40 transition-colors">
						<div class="p-4 bg-slate-800 rounded-lg text-accent">
							<Globe size={24} />
						</div>
						<div class="flex flex-col gap-2 flex-1">
							<div class="flex items-center justify-between">
								<h3 class="text-xl font-bold text-white mb-1 group-hover:text-accent transition-colors">
									{project.data.name}
								</h3>
								{project.data.link && (
									<a
										href={project.data.link}
										target="_blank"
										class="text-slate-500 hover:text-white"
									>
										<IconBrandGithub size={18} />
									</a>
								)}
							</div>
							<p class="text-slate-400 text-sm">{project.data.description}</p>
							<div class="flex flex-wrap gap-2 mt-3">
								{project.data.techStack.map((t) => (
									<span class="text-xs font-mono text-slate-500 border border-slate-800 px-2 py-1 rounded bg-slate-900/50">
										{t}
									</span>
								))}
							</div>
						</div>
					</div>
				))
			}
		</div>
	</Section>

	<!-- Tech Stack Grid with Logos -->
	<Section title="Tech Stack">
		<div
			class="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-8 items-center justify-items-center"
		>
			{
				[
					{ name: "Next.js", slug: "nextdotjs" },
					{ name: "React", slug: "react" },
					{ name: "Vue.js", slug: "vuedotjs" },
					{ name: "Express", slug: "express" },
					{ name: "Node.js", slug: "nodedotjs" },
					{ name: "Bun", slug: "bun" },
					{ name: "PostgreSQL", slug: "postgresql" },
					{ name: "MongoDB", slug: "mongodb" },
					{ name: "Firebase", slug: "firebase" },
					{ name: "Docker", slug: "docker" },
					{ name: "TypeScript", slug: "typescript" },
					{ name: "JavaScript", slug: "javascript" },
				].map((tech) => (
					<div class="flex flex-col items-center gap-3 group">
						<div class="w-16 h-16 flex items-center justify-center bg-slate-800/50 rounded-xl border border-slate-800 group-hover:border-accent/50 group-hover:bg-slate-800 transition-all duration-300 transform group-hover:-translate-y-1">
							<img
								src={`https://cdn.simpleicons.org/${tech.slug}${tech.slug === "nextdotjs" || tech.slug === "express" || tech.slug === "bun" ? "/ffffff" : ""}`}
								alt={tech.name}
								class="w-10 h-10 transition-transform duration-300 group-hover:scale-110"
							/>
						</div>
						<span class="text-sm font-semibold text-slate-500 group-hover:text-white transition-colors">
							{tech.name}
						</span>
					</div>
				))
			}
		</div>
	</Section>

	<!-- Contact -->
	<Section id="contact" title="Contact">
		<div class="text-center max-w-2xl mx-auto mb-2">
			<p class="text-slate-400">Contact me or follow my social media.</p>
		</div>
		<div class="grid grid-cols-1 md:grid-cols-3 gap-4">
			<ContactCard text="LinkedIn" href="https://linkedin.com/in/hoanguyen2001">
				<IconBrandLinkedin slot="icon" size={24} className="text-blue-500" />
			</ContactCard>

			<ContactCard text="GitHub" href="https://github.com">
				<IconBrandGithub slot="icon" size={24} className="text-white" />
			</ContactCard>

			<ContactCard text="Email Me" href="mailto:nthoa2.lhp.nh@gmail.com">
				<Mail slot="icon" size={24} className="text-red-400" />
			</ContactCard>
		</div>
	</Section>
</Layout>
